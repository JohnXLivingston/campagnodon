<div class="formulaire_spip formulaire_#FORM">
  [<p class="reponse_formulaire reponse_formulaire_ok">(#ENV*{message_ok})</p>]
  [<p class="reponse_formulaire reponse_formulaire_erreur">(#ENV*{message_erreur})</p>]

  <BOUCLE_editable(CONDITION){si #ENV{editable}}>
    <form name="formulaire_#FORM" action="#ENV{action}" method="post">
      #ACTION_FORMULAIRE{#ENV{action}}

      <fieldset>
        <legend><span><:campagnodon_form:je_donne:></span></legend>
        <div class="row-fluid">
          <div class="form-group span12">
            [(#SET{erreurs, #ENV**{erreurs}|table_valeur{montant}})]
            <div class="editer editer_montant obligatoire [(#GET{erreurs}|oui)erreur]">
              [<span class='erreur_message'>(#GET{erreurs})</span>]
              <div class="campagnodon_radio">
                <BOUCLE_montants(POUR){tableau #ENV{_montants_propositions}}>
                  #SET{val,#CLE}
                  <label>
                    <input type="radio" name="montant" class="radio" required="required" id="montant_#GET{val}" value="#GET{val}" [(#ENV{montant}|=={#GET{val}}|oui)checked="checked"] />
                    <span>#VALEUR</span>
                  </label>
                </BOUCLE_montants>
              </div>
            </div>
          </div>
        </div>
      </fieldset>

      <fieldset>
        <legend><span><:campagnodon_form:coordonnees:></span></legend>

        <div class="row-fluid">
          <div class="form-group span12">
            [(#SET{erreurs, #ENV**{erreurs}|table_valeur{email}})]
            <div class="editer editer_email obligatoire [(#GET{erreurs}|oui)erreur]">
              <label for="champ_email"><:campagnodon_form:label_email:></label>
              [<span class='erreur_message'>(#GET{erreurs})</span>]
              <input type="email" name="email" class="text" value="#ENV*{email}" id="champ_email" required="required"/>
            </div>
          </div>
        </div>

        <div class="row-fluid">
          <div class="form-group span12 choix">
            [(#SET{erreurs, #ENV**{erreurs}|table_valeur{recu_fiscal}})]
            <div class="editer editer_recu_fiscal [(#GET{erreurs}|oui)erreur]">
              <input
                type="checkbox"
                name="recu_fiscal"
                class="checkbox"
                value="1"
                id="champ_recu_fiscal"
                [(#ENV{recu_fiscal}|=={1}|oui)checked="checked"]
              />
              <label for="champ_recu_fiscal"><:campagnodon_form:label_recu_fiscal:></label>
              [<span class='erreur_message'>(#GET{erreurs})</span>]
            </div>
          </div>
        </div>

        <div si_recu_fiscal="">
          <p class="explication" display="none" recu_fiscal_explication="<:campagnodon_form:recu_fiscal_explication:>">
          </p>

          <p class="explication">
            <:campagnodon_form:recu_fiscal_champs_supplementaires:>
          </p>

          <div class="row-fluid">
            <div class="form-group span2">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{civilite}})]
              <div class="editer editer_civilite [(#GET{erreurs}|oui)erreur]">
                <label for="champ_civilite"><:campagnodon_form:label_civilite:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <select name="civilite" class="select" id="champ_civilite">
                  <option value=""></option>
                  <BOUCLE_civilites(POUR){tableau #ENV{_civilites}}>
                    #SET{val,#CLE}
                    <option value="#GET{val}" [(#ENV{civilite}|=={#GET{val}}|oui)selected="selected"]>#VALEUR</option>
                  </BOUCLE_civilites>
                </select>
              </div>
            </div>
            <div class="form-group span5">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{prenom}})]
              <div class="editer editer_prenom obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_prenom"><:campagnodon_form:label_prenom:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="text" name="prenom" class="text" value="#ENV*{prenom}" id="champ_prenom" required="required" />
              </div>
            </div>
            <div class="form-group span5">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{nom}})]
              <div class="editer editer_nom obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_nom">Nom de famille</label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="text" name="nom" class="text" value="#ENV*{nom}" id="champ_nom" required="required" />
              </div>
            </div>
          </div>

          <div class="row-fluid">
            <div class="form-group span12">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{date_naissance}})]
              <div class="editer editer_date_naissance [(#GET{erreurs}|oui)erreur]">
                <label for="champ_date_naissance"><:campagnodon_form:label_date_naissance:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="date" name="date_naissance" class="date" value="#ENV*{date_naissance}" id="champ_date_naissance" />
              </div>
            </div>
          </div>

          <div class="row-fluid">
            <div class="form-group span12">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{adresse}})]
              <div class="editer editer_adresse obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_adresse"><:campagnodon_form:label_adresse:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <textarea name="adresse" class="text" id="champ_adresse" required="required" >#ENV*{adresse}</textarea>
              </div>
            </div>
          </div>

          <div class="row-fluid">
            <div class="form-group span2">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{code_postal}})]
              <div class="editer editer_code_postal obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_code_postal"><:campagnodon_form:label_code_postal:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="text"  name="code_postal" class="text" value="#ENV*{code_postal}" id="champ_code_postal" required="required" />
              </div>
            </div>
            <div class="form-group span6">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{ville}})]
              <div class="editer editer_ville obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_ville"><:campagnodon_form:label_ville:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="text" required="required"  name="ville" class="text" value="#ENV*{ville}" id="champ_ville"/>
              </div>
            </div>
            <div class="form-group span4">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{pays}})]
              <div class="editer editer_pays obligatoire [(#GET{erreurs}|oui)erreur]">
                <label for="champ_pays"><:campagnodon_form:label_pays:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <select required="required" name="pays" class="select" id="champ_pays">
                  <option value=""></option>
                  <BOUCLE_p(pays){par nom}>
                    <option value="#CODE" [(#ENV*{pays}|=={#CODE}|oui) selected="selected"]>#NOM</option>
                  </BOUCLE_p>
                </select>
              </div>
            </div>
          </div>

          <div class="row-fluid">
            <div class="form-group span12">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{telephone}})]
              <div class="editer editer_telephone [(#GET{erreurs}|oui)erreur]">
                <label for="champ_telephone"><:campagnodon_form:label_telephone:></label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
                <input type="tel" name="telephone" class="tel" value="#ENV*{telephone}" id="champ_telephone"/>
              </div>
            </div>
          </div>

        </div>

        <BOUCLE_souscriptions_optionnelles(POUR){tableau #ENV{_souscriptions_optionnelles}}>
          #SET{nom_champ,souscription_optionnelle_#CLE}
          #SET{label_champ, #VALEUR|table_valeur{label}}
          <div class="row-fluid">
            <div class="form-group span12 choix">
              [(#SET{erreurs, #ENV**{erreurs}|table_valeur{#GET{nom_champ}}})]
              <div class="editer editer_#GET{nom_champ} [(#GET{erreurs}|oui)erreur]">
                <input
                  type="checkbox"
                  name="#GET{nom_champ}"
                  class="checkbox"
                  value="1"
                  id="champ_#GET{nom_champ}"
                  [(#ENV{#GET{nom_champ}}|=={1}|oui)checked="checked"]
                />
                <label for="champ_#GET{nom_champ}">#GET{label_champ}</label>
                [<span class='erreur_message'>(#GET{erreurs})</span>]
              </div>
            </div>
          </div>
        </BOUCLE_souscriptions_optionnelles>
      </fieldset>

      <p class="explication">
        *: <:campagnodon_form:champ_obligatoire:>
      </p>

      <p class="boutons">
        <input type="submit" class="submit" value="<:campagnodon_form:valider:>" />
      </p>
    </form>
  </BOUCLE_editable>
</div>
<script type="text/javascript">
  (function ($) {
    campagnodon_formulaire('.formulaire_#FORM');
  })(window.jQuery);
</script>