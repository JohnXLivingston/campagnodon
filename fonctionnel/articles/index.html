<!doctype html><html lang=fr class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.120.4"><meta name=description content="Documentation du module SPIP Campagnodon et de son écosystème"><meta name=author content="John Livingston"><link rel=icon href=/campagnodon/images/favicon.png type=image/png><title>Utilisation dans un article :: Documentation Campagnodon</title>
<link href=/campagnodon/css/nucleus.css?1701773211 rel=stylesheet><link href=/campagnodon/css/fontawesome-all.min.css?1701773211 rel=stylesheet><link href=/campagnodon/css/hybrid.css?1701773211 rel=stylesheet><link href=/campagnodon/css/featherlight.min.css?1701773211 rel=stylesheet><link href=/campagnodon/css/perfect-scrollbar.min.css?1701773211 rel=stylesheet><link href=/campagnodon/css/auto-complete.css?1701773211 rel=stylesheet><link href=/campagnodon/css/atom-one-dark-reasonable.css?1701773211 rel=stylesheet><link href=/campagnodon/css/theme.css?1701773211 rel=stylesheet><link href=/campagnodon/css/tabs.css?1701773211 rel=stylesheet><link href=/campagnodon/css/hugo-theme.css?1701773211 rel=stylesheet><link href=/campagnodon/css/theme-red.css?1701773211 rel=stylesheet><script src=/campagnodon/js/jquery-3.3.1.min.js?1701773211></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/campagnodon/fonctionnel/articles/><nav id=sidebar class=showVisitedLinks><div id=header-wrapper><div id=header><a id=logo href=https://johnxlivingston.github.io/campagnodon><svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" width="32" height="32" viewBox="0 0 8.4666665 8.4666669" id="svg8" inkscape:version="1.0.2 (e86c870879, 2021-01-15)" sodipodi:docname="campagnodon.svg" inkscape:export-xdpi="96" inkscape:export-ydpi="96"><defs id="defs2"/><sodipodi:namedview id="base" pagecolor="#0000ff" bordercolor="#666666" borderopacity="1" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:zoom="11.313708" inkscape:cx="15.039202" inkscape:cy="22.757451" inkscape:document-units="px" inkscape:current-layer="svg8" inkscape:document-rotation="0" showgrid="false" units="px" inkscape:pagecheckerboard="false" inkscape:window-width="1851" inkscape:window-height="1016" inkscape:window-x="0" inkscape:window-y="1077" inkscape:window-maximized="1"/><rect style="opacity:.998;fill:#000;stroke:#e50000;stroke-width:.480546;stroke-opacity:1" id="rect919" width="5.9668069" height=".97400463" x="-1.3223097" y="6.4409332" ry=".48700231" transform="rotate(-22.990066)"/><g inkscape:label="Calque 1" inkscape:groupmode="layer" id="layer1"><ellipse style="fill:#fff;fill-opacity:1;stroke:#fff;stroke-width:.478532;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="path1426" cx="2.8814063" cy="2.7711506" rx=".75977445" ry=".72326106"/><ellipse style="fill:#fff;fill-opacity:1;stroke:#fff;stroke-width:.409628;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" id="path1426-3" cx="4.4484239" cy="4.827558" rx=".65037453" ry=".61911869"/></g></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Rechercher...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/campagnodon/js/lunr.min.js?1701773211></script><script type=text/javascript src=/campagnodon/js/auto-complete.js?1701773211></script><script type=text/javascript>var baseurl="https://johnxlivingston.github.io/campagnodon"</script><script type=text/javascript src=/campagnodon/js/search.js?1701773211></script></div><div class=highlightable><ul class=topics><li data-nav-id=/campagnodon/presentation/ title=Présentation class=dd-item><a href=/campagnodon/presentation/>Présentation
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/campagnodon/presentation/fonctionnel/ title=Fonctionnel class=dd-item><a href=/campagnodon/presentation/fonctionnel/>Fonctionnel
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/presentation/architecture/ title=Architecture class=dd-item><a href=/campagnodon/presentation/architecture/>Architecture
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/presentation/licence/ title=Licence class=dd-item><a href=/campagnodon/presentation/licence/>Licence
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/campagnodon/distant/ title="Systèmes distants" class=dd-item><a href=/campagnodon/distant/>Systèmes distants
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/campagnodon/distant/civicrm/ title=CiviCRM class=dd-item><a href=/campagnodon/distant/civicrm/>CiviCRM
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/campagnodon/fonctionnel/ title="Documentation fonctionnelle" class="dd-item
parent"><a href=/campagnodon/fonctionnel/>Documentation fonctionnelle
<i class="fas fa-check read-icon"></i></a><ul><li data-nav-id=/campagnodon/fonctionnel/campagnes/ title=Campagnes class=dd-item><a href=/campagnodon/fonctionnel/campagnes/>Campagnes
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/fonctionnel/articles/ title="Utilisation dans un article" class="dd-item
active"><a href=/campagnodon/fonctionnel/articles/>Utilisation dans un article
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/fonctionnel/formulaires/ title="Faire un don ou adhérer" class=dd-item><a href=/campagnodon/fonctionnel/formulaires/>Faire un don ou adhérer
<i class="fas fa-check read-icon"></i></a></li></ul></li><li data-nav-id=/campagnodon/technique/ title="Documentation technique" class=dd-item><a href=/campagnodon/technique/>Documentation technique
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/limitations/ title="Limitations connues" class=dd-item><a href=/campagnodon/limitations/>Limitations connues
<i class="fas fa-check read-icon"></i></a></li><li data-nav-id=/campagnodon/glossaire/ title=Glossaire class=dd-item><a href=/campagnodon/glossaire/>Glossaire
<i class="fas fa-check read-icon"></i></a></li></ul><section id=shortcuts><h3>Aller plus loin</h3><ul><li><a class=padding href=https://code.globenet.org/attacfr/campagnodon><i class='fab fa-git'></i> Dépot Globenet</a></li><li><a class=padding href=https://github.com/JohnXLivingston/campagnodon><i class='fab fa-github'></i> Dépot Github</a></li><li><a class=padding href=https://liberapay.com/JohnLivingston><i></i> Soutenir l'auteur</a></li></ul></section><section id=prefooter><hr><ul><li><a class=padding href=# data-clear-history-toggle><i class="fas fa-history fa-fw"></i> Supprimer l'historique</a></li></ul></section><section id=footer><p>Built with <a href=https://github.com/matcornic/hugo-theme-learn><i class="fas fa-heart"></i></a> from <a href=https://getgrav.org>Grav</a> and <a href=https://gohugo.io/>Hugo</a></p></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>
</a></span><span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/campagnodon/>Campagnodon</a> > <a href=/campagnodon/fonctionnel/>Documentation fonctionnelle</a> > Utilisation dans un article</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#générer-la-balise-et-ses-attributs>Générer la balise et ses attributs</a></li><li><a href=#personnalisation-de-la-balise>Personnalisation de la balise</a><ul><li><a href=#don--adhésion--objectif>Don / Adhésion / Objectif</a></li><li><a href=#permettre-les-dons-récurrents>Permettre les dons récurrents</a></li><li><a href=#montants-personnalisés--montant-libre>Montants personnalisés / Montant libre</a></li><li><a href=#personnaliser-les-souscriptions-optionnelles>Personnaliser les souscriptions optionnelles</a></li><li><a href=#objectif>Objectif</a></li></ul></li><li><a href=#rédaction-de-larticle>Rédaction de l&rsquo;article</a></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Utilisation dans un article</h1><p>Pour insérer un formulaire de don et/ou d&rsquo;adhésion dans un article, il suffit
d&rsquo;utiliser une balise <code>&lt;campagnodon></code> dans la rédaction de celui-ci.
Il va falloir ajouter des attributs à cette balise, pour configurer le formulaire.</p><p>Pas de panique, Campagnodon fourni un utilitaire pour facilement générer la balise adéquate !</p><h2 id=générer-la-balise-et-ses-attributs>Générer la balise et ses attributs</h2><p>Commencez par vous rendre dans l&rsquo;écran des <a href=../campagnes>campagnes</a> :
dans l&rsquo;espace privé de SPIP, ouvrez le menu <code>Activités > Campagnodon</code>,
puis dans le menu gauche sélectionnez <code>campagnes</code> :</p><p><img src="./images/spip_campagnes.png?classes=shadow,border&amp;height=400px" alt="Campagnes synchronisées dans SPIP"></p><p>Cliquez ensuite sur la campagne qui vous intéresse.
Une fenêtre s&rsquo;ouvre alors, reprennant les informations de base de la campagne, ainsi qu&rsquo;un utilitaire pour
générer la balise qui vous convient :</p><p><img src="./images/spip_campagne.png?classes=shadow,border&amp;height=400px" alt="Détail d&rsquo;une campagne"></p><p>Si vous cochez par exemple le bouton radio <code>don</code>:</p><p><img src="./images/spip_campagne_perso.png?classes=shadow,border&amp;height=400px" alt="Balise pour un formulaire de don"></p><p>Vous pouvez alors sélectionner et copier/coller la balise campagnodon affichée dans le champs en dessous.</p><p>Ici, on a :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>&lt;campagnodon|
</span></span><span style=display:flex><span>  origine=civicrm_1|
</span></span><span style=display:flex><span>  id=4|
</span></span><span style=display:flex><span>  type=don
</span></span><span style=display:flex><span>&gt;
</span></span></code></pre></div><p>Ceci est la balise minimale pour un formulaire de don. On y trouve l&rsquo;identifiant de la campagne, ainsi que
le système distant dont elle vient (dans le cas où votre installation utiliser plusieurs systèmes distants).</p><p>Ce formulaire se basera sur la configuration par défaut de votre installation (pour la liste des montants, etc).</p><p>Si vous l&rsquo;insérez dans un article, voilà ce que vous obtiendrez :</p><p><img src="./images/spip_formulaire_don.png?classes=shadow,border&amp;height=400px" alt="Formulaire de don basique"></p><h2 id=personnalisation-de-la-balise>Personnalisation de la balise</h2><p>Vous pouvez cocher les différentes cases de l&rsquo;utilitaire pour pouvoir personnaliser les différentes options :</p><p><img src="./images/spip_campagne_perso_don.png?classes=shadow,border&amp;height=400px" alt="Personnalisation du formulaire de don"></p><p>À chaque fois que vous cochez une option, un nouveau paramètre est ajouté dans la balise.</p><p>Ce paramètre reprend les valeurs par défaut de votre installation. <strong>Vous pourrez alors copier/coller la balise
dans un article, puis ensuite changer les valeurs</strong>.</p><h3 id=don--adhésion--objectif>Don / Adhésion / Objectif</h3><p>Les premiers boutons radio permettent de choisir le type de formulaire à utiliser :</p><ul><li>formulaire de don</li><li>formulaire d&rsquo;adhésion (qui permet également de faire un don additionnel)</li><li>objectif (voir plus loin)</li></ul><h3 id=permettre-les-dons-récurrents>Permettre les dons récurrents</h3><p><strong>Si votre prestataire de paiement l&rsquo;autorise</strong>, vous pouvez activer les dons récurrents sur le formulaire.</p><div class="notices warning"><p>Actuellement Campagnodon ne gère que les dons mensuels.</p></div><p>Voilà à quoi ressemble un formulaire de dons pour lequel les dons récurrents sont activés :</p><p><img src="./images/spip_formulaire_don_recurrent.png?classes=shadow,border&amp;height=400px" alt="Formulaire de don avec dons récurrents"></p><p>La personne est d&rsquo;abord invitée à choisir si elle souhaite donner une seule fois ou plusieurs.</p><p>NB: la liste des montants est différente pour les dons uniques et les dons récurrents.</p><h3 id=montants-personnalisés--montant-libre>Montants personnalisés / Montant libre</h3><p>Par défaut, la liste des montants proposés est paramétrée sur le serveur.
Vous pouvez toutefois changer la liste pour un formulaire donné.</p><p>Quand vous cochez cette option, un attribut du type <code>montants=30,50,70,libre</code> est ajouté à la balise.</p><p>Quand vous copierez cette balise dans votre article, vous pourrez alors modifier la liste des montants proposés.</p><p>La liste des montants est tout simplement une ligne de nombre séparés par des virgules (sans espace entre eux).</p><p>Vous pouvez ajouter la valeur spéciale <code>libre</code> à la liste des montants.
Celle-ci à pour effet d&rsquo;ajouter une option «montant libre» au formulaire.
L&rsquo;utilisateur⋅rice pourra alors saisir librement le montant voulu.</p><p>Il existe une syntaxe avancée pour les montants :</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>montants=13[-450],21[450-900],35[900-1200],48[1200-1600],65[1600-2300],84[2300-3000],120[3000-4000],160[4000-]
</span></span><span style=display:flex><span>&gt;
</span></span></code></pre></div><p>Ici certains montants sont accompagnés de bornes entre crochets.
Ces bornes servent à générer une phrase pouvant conditionner par exemple les valeurs à des niveaux de revenus :</p><p><img src="./images/spip_formulaire_adhesion_montants.png?classes=shadow,border&amp;height=400px" alt="Formulaire d&rsquo;adhésion"></p><h3 id=personnaliser-les-souscriptions-optionnelles>Personnaliser les souscriptions optionnelles</h3><p>Les <a href=../../glossaire/#souscriptions-optionnelles>souscriptions optionnelles</a> peuvent être personnalisées
pour le formulaire.</p><h3 id=objectif>Objectif</h3><p>Si la campagne a un objectif de dons dans le système distant, alors vous aurez la possibilité de générer une
balise <code>campagnodon_objectif</code>. En utilisant celle-ci dans un article, vous pourrez afficher une barre de progression.</p><p>L&rsquo;avancement de la campagne est raffraîchi toutes les heures, via le script de synchronisation des campagnes.</p><div class="notices info"><p>Si vous souhaitez tester visuellement le rendu des bandeaux, ajoutez <code>debug_objectif=1</code> aux paramètres de la balise.
Vous aurez alors, en plus du bandeau de votre campagne, un rendu de différentes valeurs exemples.</p></div><h2 id=rédaction-de-larticle>Rédaction de l&rsquo;article</h2><p>Vous n&rsquo;avez plus qu&rsquo;à coller la balise dans un article, puis éventuellement personnaliser les valeurs des attributs :</p><p><img src="./images/spip_article_redaction.png?classes=shadow,border&amp;height=400px" alt="Rédaction d&rsquo;un article"></p><p>Vous pouvez bien sûr remplir l&rsquo;article avec du texte avant et après la balise.</p><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/campagnodon/fonctionnel/campagnes/ title=Campagnes><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/campagnodon/fonctionnel/formulaires/ title="Faire un don ou adhérer" style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/campagnodon/js/clipboard.min.js?1701773211></script><script src=/campagnodon/js/perfect-scrollbar.min.js?1701773211></script><script src=/campagnodon/js/perfect-scrollbar.jquery.min.js?1701773211></script><script src=/campagnodon/js/jquery.sticky.js?1701773211></script><script src=/campagnodon/js/featherlight.min.js?1701773211></script><script src=/campagnodon/js/highlight.pack.js?1701773211></script><script>hljs.initHighlightingOnLoad()</script><script src=/campagnodon/js/modernizr.custom-3.6.0.js?1701773211></script><script src=/campagnodon/js/learn.js?1701773211></script><script src=/campagnodon/js/hugo-learn.js?1701773211></script><script src=/campagnodon/mermaid/mermaid.js?1701773211></script><script>mermaid.initialize({startOnLoad:!0})</script></body></html>